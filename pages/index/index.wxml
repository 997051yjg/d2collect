<view class="container">
  <view class="header animate-enter">
    <view class="logo-area">
      <image class="logo" src="/images/1.png" mode="aspectFit" />
      <view class="titles">
        <text class="main-title">Diablo 2</text>
        <text class="sub-title">Resurrected</text>
      </view>
    </view>

    <view class="user-pill" wx:if="{{isLoggedIn}}" bindtap="goToProfile">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill" />
      <text class="username">{{userInfo.nickName}}</text>
    </view>
    <view class="user-pill login" wx:else bindtap="wxLogin">
      <text>点击登录 / 开启旅程</text>
    </view>
  </view>

  <view class="section animate-enter delay-1" wx:if="{{isLoggedIn}}">
    <view class="section-header">
      <text class="section-title">收集进度</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-box" bindtap="goToActivatedCollection">
        <text class="stat-num gold">{{collectionStats.activatedCount}}</text>
        <text class="stat-label">已点亮</text>
      </view>
      <view class="stat-box" bindtap="goToCollection">
        <text class="stat-num">{{collectionStats.totalCount}}</text>
        <text class="stat-label">总图鉴</text>
      </view>
      <view class="stat-box">
        <text class="stat-num">{{collectionStats.completionRate}}%</text>
        <text class="stat-label">完成度</text>
      </view>
    </view>
  </view>

  <view class="section animate-enter delay-2" wx:if="{{isLoggedIn && recentEquipments.length > 0}}">
    <view class="section-header">
      <text class="section-title">最近掉落</text>
    </view>
    
    <scroll-view class="recent-scroll" scroll-x enable-flex>
      <view class="recent-card" 
            wx:for="{{recentEquipments}}" 
            wx:key="id" 
            bindtap="viewEquipment" 
            data-templateid="{{item.templateId}}">
        <image class="recent-img" src="{{item.icon}}" mode="aspectFit" />
        <view class="recent-info">
          <text class="recent-name">{{item.name}}</text>
          <text class="recent-rarity">{{item.rarity}}</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>