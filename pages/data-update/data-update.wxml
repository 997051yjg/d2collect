<view class="container">
  <view class="header">
    <text class="title">装备模板数据更新</text>
    <text class="subtitle">根据中英文对照更新装备名称和图片路径</text>
  </view>

  <view class="card">
    <view class="card-header">
      <text class="card-title">更新说明</text>
    </view>
    <view class="card-content">
      <text class="info-text">
        此功能将根据中英文对照表，自动更新装备模板数据库中的字段：
      </text>
      <view class="feature-list">
        <text class="feature-item">• 将英文或空白的 name_zh 字段更新为中文</text>
        <text class="feature-item">• 设置 image 字段为对应的云存储路径</text>
        <text class="feature-item">• 智能跳过已经是中文的数据</text>
      </view>
    </view>
  </view>

  <view class="card">
    <view class="card-header">
      <text class="card-title">操作面板</text>
    </view>
    <view class="card-content">
      <view class="stats">
        <view class="stat-item">
          <text class="stat-label">需要更新的装备数量</text>
          <text class="stat-value">{{needUpdateCount}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">已更新装备数量</text>
          <text class="stat-value">{{updatedCount}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">跳过装备数量</text>
          <text class="stat-value">{{skippedCount}}</text>
        </view>
      </view>

      <button class="update-btn" bindtap="startUpdate" disabled="{{isUpdating}}">
        {{isUpdating ? '更新中...' : '开始更新'}}
      </button>

      <button class="check-btn" bindtap="checkData" disabled="{{isChecking}}">
        {{isChecking ? '检查中...' : '检查数据'}}
      </button>
    </view>
  </view>

  <view class="card" wx:if="{{updateLog.length > 0}}">
    <view class="card-header">
      <text class="card-title">更新日志</text>
      <button class="clear-btn" bindtap="clearLog" size="mini">清空</button>
    </view>
    <view class="card-content">
      <scroll-view class="log-container" scroll-y>
        <view class="log-item" wx:for="{{updateLog}}" wx:key="index">
          <text class="log-time">{{item.time}}</text>
          <text class="log-message {{item.type}}">{{item.message}}</text>
        </view>
      </scroll-view>
    </view>
  </view>
</view>