# æš—é»‘2è£…å¤‡å›¾é‰´ - æ•°æ®åº“é…ç½®è¯´æ˜

## éœ€è¦åˆ›å»ºçš„æ•°æ®åº“é›†åˆ

### 1. users (ç”¨æˆ·é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**å­—æ®µè¯´æ˜ï¼š**
- `_openid` (string): å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯†
- `nickName` (string): ç”¨æˆ·æ˜µç§°
- `avatarUrl` (string): ç”¨æˆ·å¤´åƒURL
- `collectionCount` (number): æ”¶è—è£…å¤‡æ•°é‡
- `achievementCount` (number): å·²è¾¾æˆæˆå°±æ•°é‡
- `totalProgress` (number): æ€»è¿›åº¦ç™¾åˆ†æ¯”
- `createTime` (date): åˆ›å»ºæ—¶é—´
- `updateTime` (date): æ›´æ–°æ—¶é—´

### 2. equipment_templates (è£…å¤‡æ¨¡æ¿é›†åˆ)
**æƒé™è®¾ç½®ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™
**å­—æ®µè¯´æ˜ï¼š**
- `name` (string): è£…å¤‡åç§°
- `type` (string): è£…å¤‡ç±»å‹ï¼ˆæ­¦å™¨/é˜²å…·/é¥°å“/ç¬¦æ–‡/è¯æ°´/å·è½´ï¼‰
- `rarity` (string): ç¨€æœ‰åº¦ï¼ˆæ™®é€š/é­”æ³•/ç¨€æœ‰/å¥—è£…/ä¼ å¥‡ï¼‰
- `requiredLevel` (number): éœ€æ±‚ç­‰çº§
- `imageUrl` (string): è£…å¤‡å›¾ç‰‡URL
- `description` (string): è£…å¤‡æè¿°
- `stats` (object): è£…å¤‡å±æ€§
- `createTime` (date): åˆ›å»ºæ—¶é—´

### 3. user_warehouse (ç”¨æˆ·ä»“åº“é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**å­—æ®µè¯´æ˜ï¼š**
- `_openid` (string): ç”¨æˆ·openid
- `templateId` (string): è£…å¤‡æ¨¡æ¿ID
- `activationTime` (date): æ¿€æ´»æ—¶é—´
- `notes` (string): ç”¨æˆ·å¤‡æ³¨

### 4. achievement_templates (æˆå°±æ¨¡æ¿é›†åˆ)
**æƒé™è®¾ç½®ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™
**å­—æ®µè¯´æ˜ï¼š**
- `name` (string): æˆå°±åç§°
- `description` (string): æˆå°±æè¿°
- `icon` (string): æˆå°±å›¾æ ‡emoji
- `category` (string): åˆ†ç±»ï¼ˆequipment/challenge/specialï¼‰
- `categoryText` (string): åˆ†ç±»æ˜¾ç¤ºæ–‡æœ¬
- `points` (number): æˆå°±ç‚¹æ•°
- `sortOrder` (number): æ’åºåºå·
- `requirements` (object): è¾¾æˆæ¡ä»¶
- `createTime` (date): åˆ›å»ºæ—¶é—´

### 5. user_achievements (ç”¨æˆ·æˆå°±é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**å­—æ®µè¯´æ˜ï¼š**
- `_openid` (string): ç”¨æˆ·openid
- `achievementId` (string): æˆå°±æ¨¡æ¿ID
- `completed` (boolean): æ˜¯å¦å®Œæˆ
- `progress` (number): å½“å‰è¿›åº¦ï¼ˆ0-100ï¼‰
- `completedAt` (date): å®Œæˆæ—¶é—´
- `updateTime` (date): æ›´æ–°æ—¶é—´

## åˆå§‹æ•°æ®å¯¼å…¥

### æˆå°±æ¨¡æ¿æ•°æ®ï¼ˆå¯¼å…¥åˆ°achievement_templatesé›†åˆï¼‰
```json
[
  {
    "name": "åˆå…¥æ±Ÿæ¹–",
    "description": "å®Œæˆé¦–æ¬¡è£…å¤‡ä¸Šä¼ ",
    "icon": "âš”ï¸",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 10,
    "sortOrder": 1,
    "requirements": {
      "type": "upload_count",
      "target": 1
    }
  },
  {
    "name": "è£…å¤‡æ”¶è—å®¶",
    "description": "æ”¶é›†10ä»¶ä¸åŒè£…å¤‡",
    "icon": "ğŸ›¡ï¸",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 30,
    "sortOrder": 2,
    "requirements": {
      "type": "collection_count",
      "target": 10
    }
  },
  {
    "name": "æš—é‡‘å¤§å¸ˆ",
    "description": "æ”¶é›†5ä»¶æš—é‡‘è£…å¤‡",
    "icon": "ğŸŒŸ",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 50,
    "sortOrder": 3,
    "requirements": {
      "type": "rarity_count",
      "rarity": "ä¼ å¥‡",
      "target": 5
    }
  },
  {
    "name": "å¥—è£…æ”¶é›†è€…",
    "description": "æ”¶é›†å®Œæ•´çš„ä¸€å¥—è£…å¤‡",
    "icon": "ğŸ”—",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 100,
    "sortOrder": 4,
    "requirements": {
      "type": "set_completion",
      "target": 1
    }
  },
  {
    "name": "å›¾é‰´å¤§å¸ˆ",
    "description": "æ¿€æ´»50%çš„å›¾é‰´",
    "icon": "ğŸ“š",
    "category": "challenge",
    "categoryText": "æŒ‘æˆ˜ä»»åŠ¡",
    "points": 80,
    "sortOrder": 5,
    "requirements": {
      "type": "progress_percentage",
      "target": 50
    }
  },
  {
    "name": "å®Œç¾æ”¶è—",
    "description": "æ¿€æ´»æ‰€æœ‰å›¾é‰´",
    "icon": "ğŸ†",
    "category": "challenge",
    "categoryText": "æŒ‘æˆ˜ä»»åŠ¡",
    "points": 200,
    "sortOrder": 6,
    "requirements": {
      "type": "progress_percentage",
      "target": 100
    }
  },
  {
    "name": "ä¼ å¥‡çŒäºº",
    "description": "æ”¶é›†æ‰€æœ‰ä¼ å¥‡è£…å¤‡",
    "icon": "âš¡",
    "category": "special",
    "categoryText": "ç‰¹æ®Šæˆå°±",
    "points": 150,
    "sortOrder": 7,
    "requirements": {
      "type": "all_legendary"
    }
  },
  {
    "name": "ç¬¦æ–‡ä¹‹è¯­å¤§å¸ˆ",
    "description": "å®Œæˆæ‰€æœ‰ç¬¦æ–‡ä¹‹è¯­ç»„åˆ",
    "icon": "ğŸ”®",
    "category": "special",
    "categoryText": "ç‰¹æ®Šæˆå°±",
    "points": 180,
    "sortOrder": 8,
    "requirements": {
      "type": "all_runewords"
    }
  }
]
```

## äº‘å‡½æ•°é…ç½®

### 1. getOpenid (å·²å­˜åœ¨)
- åŠŸèƒ½ï¼šè·å–ç”¨æˆ·openid
- è°ƒç”¨æ—¶æœºï¼šç”¨æˆ·ç™»å½•æ—¶

### 2. checkAchievements (å·²å­˜åœ¨)
- åŠŸèƒ½ï¼šæ£€æŸ¥ç”¨æˆ·æˆå°±è¿›åº¦
- è°ƒç”¨æ—¶æœºï¼šè£…å¤‡ä¸Šä¼ åã€é¡µé¢åŠ è½½æ—¶

## éƒ¨ç½²æ­¥éª¤

1. **åˆ›å»ºæ•°æ®åº“é›†åˆ**
   - åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å°
   - åˆ›å»ºä¸Šè¿°5ä¸ªæ•°æ®åº“é›†åˆ
   - è®¾ç½®ç›¸åº”çš„æƒé™è§„åˆ™

2. **å¯¼å…¥åˆå§‹æ•°æ®**
   - å°†æˆå°±æ¨¡æ¿æ•°æ®å¯¼å…¥åˆ°achievement_templatesé›†åˆ

3. **éƒ¨ç½²äº‘å‡½æ•°**
   - åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å³é”®ç‚¹å‡»cloudfunctionsæ–‡ä»¶å¤¹
   - é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"

4. **é…ç½®ç¯å¢ƒå˜é‡**
   - åœ¨app.jsä¸­ç¡®è®¤äº‘ç¯å¢ƒIDæ­£ç¡®é…ç½®

## æ³¨æ„äº‹é¡¹

1. æ•°æ®åº“æƒé™è®¾ç½®éå¸¸é‡è¦ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®å®‰å…¨
2. é¦–æ¬¡ä½¿ç”¨éœ€è¦ç”¨æˆ·æˆæƒç™»å½•æ‰èƒ½åˆ›å»ºç”¨æˆ·è®°å½•
3. æˆå°±è¿›åº¦ä¼šåœ¨ç”¨æˆ·ä¸Šä¼ è£…å¤‡æ—¶è‡ªåŠ¨æ›´æ–°
4. å¦‚æœå‡ºç°æ•°æ®åŒæ­¥é—®é¢˜ï¼Œå¯ä»¥è°ƒç”¨checkAchievementsäº‘å‡½æ•°é‡æ–°è®¡ç®—è¿›åº¦