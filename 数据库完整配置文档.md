# æš—é»‘2è£…å¤‡å›¾é‰´ - æ•°æ®åº“å®Œæ•´é…ç½®æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºå¾®ä¿¡å°ç¨‹åºäº‘å¼€å‘çš„æš—é»‘ç ´åç¥2è£…å¤‡æ”¶é›†ç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·ç®¡ç†ã€è£…å¤‡å›¾é‰´ã€æˆå°±ç³»ç»Ÿç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## æ•°æ®åº“é›†åˆç»“æ„

### 1. users (ç”¨æˆ·é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**ç´¢å¼•å»ºè®®ï¼š** åœ¨ `openid` å­—æ®µä¸Šåˆ›å»ºå”¯ä¸€ç´¢å¼•

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `_id` | ObjectId | è‡ªåŠ¨ | æ–‡æ¡£å”¯ä¸€æ ‡è¯† | - |
| `openid` | string | æ˜¯ | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | "o6_bmjrPTlm6_2sgVt7hMZOPfL2M" |
| `nickName` | string | æ˜¯ | ç”¨æˆ·æ˜µç§° | "æš—é»‘å†’é™©è€…" |
| `avatarUrl` | string | æ˜¯ | ç”¨æˆ·å¤´åƒURL | "https://thirdwx.qlogo.cn/..." |
| `collectionCount` | number | æ˜¯ | æ”¶è—è£…å¤‡æ•°é‡ | 15 |
| `achievementCount` | number | æ˜¯ | å·²è¾¾æˆæˆå°±æ•°é‡ | 3 |
| `totalProgress` | number | æ˜¯ | æ€»è¿›åº¦ç™¾åˆ†æ¯” | 25 |
| `createTime` | date | è‡ªåŠ¨ | åˆ›å»ºæ—¶é—´ | ISODate("2024-01-01T00:00:00Z") |
| `updateTime` | date | è‡ªåŠ¨ | æ›´æ–°æ—¶é—´ | ISODate("2024-01-18T15:30:00Z") |

**åˆ›å»ºå‘½ä»¤ï¼š**
```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å°æ‰§è¡Œ
db.createCollection("users")

// åˆ›å»ºç´¢å¼•
db.users.createIndex({ "openid": 1 }, { unique: true })
```

### 2. equipment_templates (è£…å¤‡æ¨¡æ¿é›†åˆ)
**æƒé™è®¾ç½®ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™
**ç´¢å¼•å»ºè®®ï¼š** åœ¨ `name` å­—æ®µä¸Šåˆ›å»ºç´¢å¼•

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `_id` | ObjectId | è‡ªåŠ¨ | æ–‡æ¡£å”¯ä¸€æ ‡è¯† | - |
| `name` | string | æ˜¯ | è£…å¤‡åç§° | "æ³°ç‘å°”çš„åŠ›é‡" |
| `type` | string | æ˜¯ | è£…å¤‡ç±»å‹ | "æ­¦å™¨", "é˜²å…·", "é¥°å“", "ç¬¦æ–‡", "è¯æ°´", "å·è½´" |
| `rarity` | string | æ˜¯ | ç¨€æœ‰åº¦ | "æ™®é€š", "é­”æ³•", "ç¨€æœ‰", "å¥—è£…", "æš—é‡‘" |
| `requiredLevel` | number | å¦ | éœ€æ±‚ç­‰çº§ | 75 |
| `imageUrl` | string | å¦ | è£…å¤‡å›¾ç‰‡URL | "cloud://cloud1-7g43dval99d60dca/equipment/tyrael.png" |
| `description` | string | å¦ | è£…å¤‡æè¿° | "å¤©ä½¿æ³°ç‘å°”ä½¿ç”¨çš„ç¥åœ£ç›”ç”²" |
| `stats` | string | å¦ | è£…å¤‡å±æ€§æ–‡æœ¬ | "æ”»å‡»åŠ›: 150, é˜²å¾¡åŠ›: 200, ç‰¹æ®Šæ•ˆæœ: å‡»é€€" |
| `createTime` | date | è‡ªåŠ¨ | åˆ›å»ºæ—¶é—´ | ISODate("2024-01-01T00:00:00Z") |

**åˆ›å»ºå‘½ä»¤ï¼š**
```javascript
db.createCollection("equipment_templates")
db.equipment_templates.createIndex({ "name": 1 })
```

### 3. user_warehouse (ç”¨æˆ·ä»“åº“é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**ç´¢å¼•å»ºè®®ï¼š** åœ¨ `openid` å’Œ `equipmentName` ä¸Šåˆ›å»ºå¤åˆç´¢å¼•

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `_id` | ObjectId | è‡ªåŠ¨ | æ–‡æ¡£å”¯ä¸€æ ‡è¯† | - |
| `openid` | string | æ˜¯ | ç”¨æˆ·openid | "o6_bmjrPTlm6_2sgVt7hMZOPfL2M" |
| `templateId` | string | æ˜¯ | è£…å¤‡æ¨¡æ¿ID | "67a1b2c3d4e5f6a1b2c3d4e5" |
| `equipmentName` | string | æ˜¯ | è£…å¤‡åç§° | "æ³°ç‘å°”çš„åŠ›é‡" |
| `activationTime` | date | è‡ªåŠ¨ | æ¿€æ´»æ—¶é—´ | ISODate("2024-01-18T15:30:00Z") |
| `notes` | string | å¦ | ç”¨æˆ·å¤‡æ³¨ | "ç¬¬ä¸€æ¬¡æ‰è½ï¼" |

**åˆ›å»ºå‘½ä»¤ï¼š**
```javascript
db.createCollection("user_warehouse")
db.user_warehouse.createIndex({ "openid": 1, "equipmentName": 1 })
```

### 4. achievement_templates (æˆå°±æ¨¡æ¿é›†åˆ)
**æƒé™è®¾ç½®ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œä»…åˆ›å»ºè€…å¯å†™

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `_id` | ObjectId | è‡ªåŠ¨ | æ–‡æ¡£å”¯ä¸€æ ‡è¯† | - |
| `name` | string | æ˜¯ | æˆå°±åç§° | "åˆå…¥æ±Ÿæ¹–" |
| `description` | string | æ˜¯ | æˆå°±æè¿° | "å®Œæˆé¦–æ¬¡è£…å¤‡ä¸Šä¼ " |
| `icon` | string | æ˜¯ | æˆå°±å›¾æ ‡emoji | "âš”ï¸" |
| `category` | string | æ˜¯ | åˆ†ç±» | "equipment", "challenge", "special" |
| `categoryText` | string | æ˜¯ | åˆ†ç±»æ˜¾ç¤ºæ–‡æœ¬ | "è£…å¤‡æ”¶é›†" |
| `points` | number | æ˜¯ | æˆå°±ç‚¹æ•° | 10 |
| `sortOrder` | number | æ˜¯ | æ’åºåºå· | 1 |
| `requirements` | object | æ˜¯ | è¾¾æˆæ¡ä»¶ | { "type": "upload_count", "target": 1 } |
| `createTime` | date | è‡ªåŠ¨ | åˆ›å»ºæ—¶é—´ | ISODate("2024-01-01T00:00:00Z") |

**åˆ›å»ºå‘½ä»¤ï¼š**
```javascript
db.createCollection("achievement_templates")
```

### 5. user_achievements (ç”¨æˆ·æˆå°±é›†åˆ)
**æƒé™è®¾ç½®ï¼š** ä»…åˆ›å»ºè€…å¯è¯»å†™
**ç´¢å¼•å»ºè®®ï¼š** åœ¨ `openid` å’Œ `achievementId` ä¸Šåˆ›å»ºå¤åˆç´¢å¼•

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `_id` | ObjectId | è‡ªåŠ¨ | æ–‡æ¡£å”¯ä¸€æ ‡è¯† | - |
| `openid` | string | æ˜¯ | ç”¨æˆ·openid | "o6_bmjrPTlm6_2sgVt7hMZOPfL2M" |
| `achievementId` | string | æ˜¯ | æˆå°±æ¨¡æ¿ID | "67a1b2c3d4e5f6a1b2c3d4e5" |
| `completed` | boolean | æ˜¯ | æ˜¯å¦å®Œæˆ | true |
| `progress` | number | æ˜¯ | å½“å‰è¿›åº¦ï¼ˆ0-100ï¼‰ | 100 |
| `completedAt` | date | å¦ | å®Œæˆæ—¶é—´ | ISODate("2024-01-18T15:30:00Z") |
| `updateTime` | date | è‡ªåŠ¨ | æ›´æ–°æ—¶é—´ | ISODate("2024-01-18T15:30:00Z") |

**åˆ›å»ºå‘½ä»¤ï¼š**
```javascript
db.createCollection("user_achievements")
db.user_achievements.createIndex({ "openid": 1, "achievementId": 1 })
```

## åˆå§‹æ•°æ®å¯¼å…¥

### æˆå°±æ¨¡æ¿æ•°æ®ï¼ˆå¿…é¡»å¯¼å…¥ï¼‰
```json
[
  {
    "name": "åˆå…¥æ±Ÿæ¹–",
    "description": "å®Œæˆé¦–æ¬¡è£…å¤‡ä¸Šä¼ ",
    "icon": "âš”ï¸",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 10,
    "sortOrder": 1,
    "requirements": {
      "type": "upload_count",
      "target": 1
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "è£…å¤‡æ”¶è—å®¶",
    "description": "æ”¶é›†10ä»¶ä¸åŒè£…å¤‡",
    "icon": "ğŸ›¡ï¸",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 30,
    "sortOrder": 2,
    "requirements": {
      "type": "collection_count",
      "target": 10
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "æš—é‡‘å¤§å¸ˆ",
    "description": "æ”¶é›†5ä»¶æš—é‡‘è£…å¤‡",
    "icon": "ğŸŒŸ",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 50,
    "sortOrder": 3,
    "requirements": {
      "type": "rarity_count",
      "rarity": "æš—é‡‘",
      "target": 5
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "å¥—è£…æ”¶é›†è€…",
    "description": "æ”¶é›†å®Œæ•´çš„ä¸€å¥—è£…å¤‡",
    "icon": "ğŸ”—",
    "category": "equipment",
    "categoryText": "è£…å¤‡æ”¶é›†",
    "points": 100,
    "sortOrder": 4,
    "requirements": {
      "type": "set_completion",
      "target": 1
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "å›¾é‰´å¤§å¸ˆ",
    "description": "æ¿€æ´»50%çš„å›¾é‰´",
    "icon": "ğŸ“š",
    "category": "challenge",
    "categoryText": "æŒ‘æˆ˜ä»»åŠ¡",
    "points": 80,
    "sortOrder": 5,
    "requirements": {
      "type": "progress_percentage",
      "target": 50
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "å®Œç¾æ”¶è—",
    "description": "æ¿€æ´»æ‰€æœ‰å›¾é‰´",
    "icon": "ğŸ†",
    "category": "challenge",
    "categoryText": "æŒ‘æˆ˜ä»»åŠ¡",
    "points": 200,
    "sortOrder": 6,
    "requirements": {
      "type": "progress_percentage",
      "target": 100
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "æš—é‡‘çŒäºº",
    "description": "æ”¶é›†æ‰€æœ‰æš—é‡‘è£…å¤‡",
    "icon": "âš¡",
    "category": "special",
    "categoryText": "ç‰¹æ®Šæˆå°±",
    "points": 150,
    "sortOrder": 7,
    "requirements": {
      "type": "all_unique"
    },
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "ç¬¦æ–‡ä¹‹è¯­å¤§å¸ˆ",
    "description": "å®Œæˆæ‰€æœ‰ç¬¦æ–‡ä¹‹è¯­ç»„åˆ",
    "icon": "ğŸ”®",
    "category": "special",
    "categoryText": "ç‰¹æ®Šæˆå°±",
    "points": 180,
    "sortOrder": 8,
    "requirements": {
      "type": "all_runewords"
    },
    "createTime": "2024-01-01T00:00:00Z"
  }
]
```

### ç¤ºä¾‹è£…å¤‡æ¨¡æ¿æ•°æ®ï¼ˆå¯é€‰å¯¼å…¥ï¼‰
```json
[
  {
    "name": "é£ä¹‹åŠ›",
    "type": "æ­¦å™¨",
    "rarity": "æš—é‡‘",
    "requiredLevel": 73,
    "description": "ä¹å¤´è›‡å¼“ï¼Œæš—é»‘2ä¸­æœ€è‘—åçš„å¼“ç±»æ­¦å™¨",
    "stats": "æ”»å‡»åŠ›: 35, æ”»å‡»é€Ÿåº¦: å¿«é€Ÿ, ç‰¹æ®Šæ•ˆæœ: ç©¿åˆºæ”»å‡»ï¼Œå‡»é€€",
    "createTime": "2024-01-01T00:00:00Z"
  },
  {
    "name": "å¡”æ‹‰å¤çš„å®ˆæŠ¤",
    "type": "é˜²å…·",
    "rarity": "å¥—è£…",
    "requiredLevel": 66,
    "description": "æ¼†ç”²ï¼Œå¡”æ‹‰å¤å¥—è£…çš„æ ¸å¿ƒéƒ¨ä»¶",
    "stats": "é˜²å¾¡åŠ›: 917, æŠ—æ€§: æ‰€æœ‰æŠ—æ€§+88, ç‰¹æ®Šæ•ˆæœ: +2æ³•å¸ˆæŠ€èƒ½ç­‰çº§",
    "createTime": "2024-01-01T00:00:00Z"
  }
]
```

## äº‘å‡½æ•°é…ç½®

### 1. getOpenid (å·²éƒ¨ç½²)
- **åŠŸèƒ½ï¼š** è·å–ç”¨æˆ·openid
- **è°ƒç”¨æ—¶æœºï¼š** ç”¨æˆ·ç™»å½•æ—¶
- **å…¥å£æ–‡ä»¶ï¼š** `cloudfunctions/getOpenid/index.js`

### 2. checkAchievements (å·²éƒ¨ç½²)
- **åŠŸèƒ½ï¼š** æ£€æŸ¥ç”¨æˆ·æˆå°±è¿›åº¦
- **è°ƒç”¨æ—¶æœºï¼š** è£…å¤‡ä¸Šä¼ åã€é¡µé¢åŠ è½½æ—¶
- **å…¥å£æ–‡ä»¶ï¼š** `cloudfunctions/checkAchievements/index.js`

## æ•°æ®å¯¼å…¥æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šé€šè¿‡å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯¼å…¥
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. è¿›å…¥äº‘å¼€å‘æ§åˆ¶å°
3. é€‰æ‹©"æ•°æ®åº“"æ ‡ç­¾é¡µ
4. ç‚¹å‡»å¯¹åº”é›†åˆï¼Œé€‰æ‹©"å¯¼å…¥"
5. é€‰æ‹©JSONæ–‡ä»¶å¹¶å¯¼å…¥

### æ–¹æ³•äºŒï¼šé€šè¿‡äº‘å¼€å‘æ§åˆ¶å°å¯¼å…¥
1. ç™»å½•å¾®ä¿¡äº‘å¼€å‘æ§åˆ¶å°
2. è¿›å…¥æ•°æ®åº“ç®¡ç†
3. é€‰æ‹©å¯¹åº”é›†åˆ
4. ç‚¹å‡»"å¯¼å…¥"æŒ‰é’®
5. ä¸Šä¼ JSONæ–‡ä»¶

### æ–¹æ³•ä¸‰ï¼šé€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥ï¼ˆé«˜çº§ï¼‰
```bash
# ä½¿ç”¨äº‘å¼€å‘CLIå·¥å…·
cloudbase database:import users users.json
cloudbase database:import achievement_templates achievements.json
```

## æƒé™è§„åˆ™é…ç½®

### usersé›†åˆæƒé™
```json
{
  "read": "auth.openid == doc.openid",
  "write": "auth.openid == doc.openid"
}
```

### user_warehouseé›†åˆæƒé™
```json
{
  "read": "auth.openid == doc.openid",
  "write": "auth.openid == doc.openid"
}
```

### user_achievementsé›†åˆæƒé™
```json
{
  "read": "auth.openid == doc.openid",
  "write": "auth.openid == doc.openid"
}
```

### equipment_templatesé›†åˆæƒé™
```json
{
  "read": true,
  "write": "auth.openid != null"
}
```

### achievement_templatesé›†åˆæƒé™
```json
{
  "read": true,
  "write": "auth.openid != null"
}
```

## æ•°æ®å¤‡ä»½ç­–ç•¥

### å®šæœŸå¤‡ä»½
- å»ºè®®æ¯å‘¨å¤‡ä»½ä¸€æ¬¡ç”¨æˆ·æ•°æ®
- æ¯æœˆå¤‡ä»½ä¸€æ¬¡æ¨¡æ¿æ•°æ®

### å¤‡ä»½æ–‡ä»¶å‘½åè§„èŒƒ
- `users_backup_YYYYMMDD.json`
- `achievements_backup_YYYYMMDD.json`
- `equipment_backup_YYYYMMDD.json`

## å¸¸è§é—®é¢˜å¤„ç†

### 1. æ•°æ®å¯¼å…¥å¤±è´¥
**åŸå› ï¼š** JSONæ ¼å¼ä¸æ­£ç¡®æˆ–å­—æ®µç±»å‹ä¸åŒ¹é…
**è§£å†³æ–¹æ¡ˆï¼š** æ£€æŸ¥JSONæ ¼å¼ï¼Œç¡®ä¿å­—æ®µç±»å‹ä¸æ–‡æ¡£ä¸€è‡´

### 2. æƒé™è®¾ç½®é”™è¯¯
**åŸå› ï¼š** æƒé™è§„åˆ™é…ç½®ä¸å½“
**è§£å†³æ–¹æ¡ˆï¼š** ä½¿ç”¨ä¸Šè¿°æƒé™è§„åˆ™æ¨¡æ¿é‡æ–°é…ç½®

### 3. ç´¢å¼•åˆ›å»ºå¤±è´¥
**åŸå› ï¼š** å·²æœ‰é‡å¤æ•°æ®
**è§£å†³æ–¹æ¡ˆï¼š** å…ˆæ¸…ç†é‡å¤æ•°æ®ï¼Œå†åˆ›å»ºç´¢å¼•

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç´¢å¼•ä¼˜åŒ–ï¼š** åœ¨æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µä¸Šåˆ›å»ºç´¢å¼•
2. **æ•°æ®åˆ†é¡µï¼š** å¤§é‡æ•°æ®æŸ¥è¯¢æ—¶ä½¿ç”¨åˆ†é¡µ
3. **ç¼“å­˜ç­–ç•¥ï¼š** å¯¹é™æ€æ•°æ®ä½¿ç”¨æœ¬åœ°ç¼“å­˜
4. **æ‰¹é‡æ“ä½œï¼š** ä½¿ç”¨æ‰¹é‡å†™å…¥å‡å°‘æ•°æ®åº“è¯·æ±‚

## æ•°æ®è¿ç§»æŒ‡å—

### ä»æµ‹è¯•ç¯å¢ƒåˆ°ç”Ÿäº§ç¯å¢ƒ
1. å¯¼å‡ºæµ‹è¯•ç¯å¢ƒæ•°æ®
2. åœ¨ç”Ÿäº§ç¯å¢ƒåˆ›å»ºç›¸åŒé›†åˆç»“æ„
3. å¯¼å…¥æ•°æ®
4. æ›´æ–°å°ç¨‹åºä¸­çš„äº‘ç¯å¢ƒID

### ç‰ˆæœ¬å‡çº§
1. å¤‡ä»½å½“å‰æ•°æ®
2. ä¿®æ”¹é›†åˆç»“æ„
3. æ•°æ®è¿ç§»è„šæœ¬
4. éªŒè¯æ•°æ®å®Œæ•´æ€§

---

## æˆå°±æ¡ä»¶å®ç°è¯´æ˜

### æˆå°±ç±»å‹åŠå…¶å®ç°

#### 1. upload_count (ä¸Šä¼ æ•°é‡)
- **å®ç°ï¼š** ç»Ÿè®¡ç”¨æˆ·ä¸Šä¼ çš„è£…å¤‡æ€»æ•°
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 2. collection_count (æ”¶é›†æ•°é‡)
- **å®ç°ï¼š** ç»Ÿè®¡ç”¨æˆ·æ‹¥æœ‰çš„ä¸åŒè£…å¤‡æ•°é‡
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 3. rarity_count (ç¨€æœ‰åº¦ç»Ÿè®¡)
- **å®ç°ï¼š** ç»Ÿè®¡ç‰¹å®šç¨€æœ‰åº¦çš„è£…å¤‡æ•°é‡
- **æ”¯æŒç¨€æœ‰åº¦ï¼š** æ™®é€šã€é­”æ³•ã€ç¨€æœ‰ã€å¥—è£…ã€æš—é‡‘
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(ç‰¹å®šç¨€æœ‰åº¦è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 4. set_completion (å¥—è£…å®Œæˆ)
- **å®ç°ï¼š** ç»Ÿè®¡å¥—è£…è£…å¤‡çš„æ”¶é›†è¿›åº¦
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å¥—è£…è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 5. progress_percentage (å›¾é‰´å®Œæˆç™¾åˆ†æ¯”)
- **å®ç°ï¼š** è®¡ç®—ç”¨æˆ·è£…å¤‡æ”¶é›†å æ‰€æœ‰è£…å¤‡æ¨¡æ¿çš„ç™¾åˆ†æ¯”
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å·²æ”¶é›†è£…å¤‡æ•°é‡ / æ€»è£…å¤‡æ¨¡æ¿æ•°é‡ * 100, 100)`

#### 6. all_unique (æ”¶é›†æ‰€æœ‰æš—é‡‘è£…å¤‡)
- **å®ç°ï¼š** æ£€æŸ¥æ˜¯å¦æ”¶é›†äº†æ‰€æœ‰æš—é‡‘è£…å¤‡æ¨¡æ¿
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å·²æ”¶é›†æš—é‡‘è£…å¤‡æ•°é‡ / æ€»æš—é‡‘è£…å¤‡æ¨¡æ¿æ•°é‡ * 100, 100)`

### äº‘å‡½æ•°æ‰§è¡Œæµç¨‹

1. **æ•°æ®è·å–**ï¼šè·å–ç”¨æˆ·è£…å¤‡ã€æ‰€æœ‰è£…å¤‡æ¨¡æ¿ã€æˆå°±æ¨¡æ¿å’Œç”¨æˆ·æˆå°±è®°å½•
2. **æ•°æ®é¢„å¤„ç†**ï¼šå…³è”ç”¨æˆ·è£…å¤‡ä¸è£…å¤‡æ¨¡æ¿ï¼Œç»Ÿè®¡ç¨€æœ‰åº¦åˆ†å¸ƒ
3. **è¿›åº¦è®¡ç®—**ï¼šæ ¹æ®æˆå°±ç±»å‹è®¡ç®—æ¯ä¸ªæˆå°±çš„å½“å‰è¿›åº¦
4. **æˆå°±è§£é”**ï¼šæ£€æµ‹æ–°è§£é”çš„æˆå°±å¹¶è®°å½•è§£é”æ—¶é—´
5. **æ•°æ®æ›´æ–°**ï¼šæ›´æ–°ç”¨æˆ·æˆå°±è®°å½•å’Œç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯

### æ³¨æ„äº‹é¡¹

1. **è£…å¤‡æ¨¡æ¿ä¾èµ–**ï¼šå¤æ‚æˆå°±ï¼ˆå¦‚ç¨€æœ‰åº¦ç»Ÿè®¡ã€å¥—è£…å®Œæˆï¼‰éœ€è¦è£…å¤‡æ¨¡æ¿æ•°æ®æ”¯æŒ
2. **å®æ—¶æ€§**ï¼šæˆå°±è¿›åº¦åœ¨ç”¨æˆ·ä¸Šä¼ è£…å¤‡åè‡ªåŠ¨æ›´æ–°
3. **å‡†ç¡®æ€§**ï¼šå¥—è£…å®Œæˆç›®å‰ä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œåç»­å¯æ ¹æ®å®é™…å¥—è£…ç³»ç»Ÿä¼˜åŒ–
4. **æ‰©å±•æ€§**ï¼šæˆå°±ç±»å‹å¯è½»æ¾æ‰©å±•ï¼Œåªéœ€åœ¨äº‘å‡½æ•°ä¸­æ·»åŠ æ–°çš„caseåˆ†æ”¯

---

## æˆå°±æ¡ä»¶å®ç°è¯´æ˜

### æˆå°±ç±»å‹åŠå…¶å®ç°

#### 1. upload_count (ä¸Šä¼ æ•°é‡)
- **å®ç°ï¼š** ç»Ÿè®¡ç”¨æˆ·ä¸Šä¼ çš„è£…å¤‡æ€»æ•°
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 2. collection_count (æ”¶é›†æ•°é‡)
- **å®ç°ï¼š** ç»Ÿè®¡ç”¨æˆ·æ‹¥æœ‰çš„ä¸åŒè£…å¤‡æ•°é‡
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 3. rarity_count (ç¨€æœ‰åº¦ç»Ÿè®¡)
- **å®ç°ï¼š** ç»Ÿè®¡ç‰¹å®šç¨€æœ‰åº¦çš„è£…å¤‡æ•°é‡
- **æ”¯æŒç¨€æœ‰åº¦ï¼š** æ™®é€šã€é­”æ³•ã€ç¨€æœ‰ã€å¥—è£…ã€æš—é‡‘
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(ç‰¹å®šç¨€æœ‰åº¦è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 4. set_completion (å¥—è£…å®Œæˆ)
- **å®ç°ï¼š** ç»Ÿè®¡å¥—è£…è£…å¤‡çš„æ”¶é›†è¿›åº¦
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å¥—è£…è£…å¤‡æ•°é‡ / ç›®æ ‡æ•°é‡ * 100, 100)`

#### 5. progress_percentage (å›¾é‰´å®Œæˆç™¾åˆ†æ¯”)
- **å®ç°ï¼š** è®¡ç®—ç”¨æˆ·è£…å¤‡æ”¶é›†å æ‰€æœ‰è£…å¤‡æ¨¡æ¿çš„ç™¾åˆ†æ¯”
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å·²æ”¶é›†è£…å¤‡æ•°é‡ / æ€»è£…å¤‡æ¨¡æ¿æ•°é‡ * 100, 100)`

#### 6. all_unique (æ”¶é›†æ‰€æœ‰æš—é‡‘è£…å¤‡)
- **å®ç°ï¼š** æ£€æŸ¥æ˜¯å¦æ”¶é›†äº†æ‰€æœ‰æš—é‡‘è£…å¤‡æ¨¡æ¿
- **è®¡ç®—ï¼š** `è¿›åº¦ = min(å·²æ”¶é›†æš—é‡‘è£…å¤‡æ•°é‡ / æ€»æš—é‡‘è£…å¤‡æ¨¡æ¿æ•°é‡ * 100, 100)`

### äº‘å‡½æ•°æ‰§è¡Œæµç¨‹

1. **æ•°æ®è·å–**ï¼šè·å–ç”¨æˆ·è£…å¤‡ã€æ‰€æœ‰è£…å¤‡æ¨¡æ¿ã€æˆå°±æ¨¡æ¿å’Œç”¨æˆ·æˆå°±è®°å½•
2. **æ•°æ®é¢„å¤„ç†**ï¼šå…³è”ç”¨æˆ·è£…å¤‡ä¸è£…å¤‡æ¨¡æ¿ï¼Œç»Ÿè®¡ç¨€æœ‰åº¦åˆ†å¸ƒ
3. **è¿›åº¦è®¡ç®—**ï¼šæ ¹æ®æˆå°±ç±»å‹è®¡ç®—æ¯ä¸ªæˆå°±çš„å½“å‰è¿›åº¦
4. **æˆå°±è§£é”**ï¼šæ£€æµ‹æ–°è§£é”çš„æˆå°±å¹¶è®°å½•è§£é”æ—¶é—´
5. **æ•°æ®æ›´æ–°**ï¼šæ›´æ–°ç”¨æˆ·æˆå°±è®°å½•å’Œç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯

### æ³¨æ„äº‹é¡¹

1. **è£…å¤‡æ¨¡æ¿ä¾èµ–**ï¼šå¤æ‚æˆå°±ï¼ˆå¦‚ç¨€æœ‰åº¦ç»Ÿè®¡ã€å¥—è£…å®Œæˆï¼‰éœ€è¦è£…å¤‡æ¨¡æ¿æ•°æ®æ”¯æŒ
2. **å®æ—¶æ€§**ï¼šæˆå°±è¿›åº¦åœ¨ç”¨æˆ·ä¸Šä¼ è£…å¤‡åè‡ªåŠ¨æ›´æ–°
3. **å‡†ç¡®æ€§**ï¼šå¥—è£…å®Œæˆç›®å‰ä¸ºç®€åŒ–ç‰ˆæœ¬ï¼Œåç»­å¯æ ¹æ®å®é™…å¥—è£…ç³»ç»Ÿä¼˜åŒ–
4. **æ‰©å±•æ€§**ï¼šæˆå°±ç±»å‹å¯è½»æ¾æ‰©å±•ï¼Œåªéœ€åœ¨äº‘å‡½æ•°ä¸­æ·»åŠ æ–°çš„caseåˆ†æ”¯

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v2.0  
**æœ€åæ›´æ–°ï¼š** 2024-01-18  
**ç»´æŠ¤è€…ï¼š** æš—é»‘2è£…å¤‡å›¾é‰´å¼€å‘å›¢é˜Ÿ